{% extends "base.html" %}

{% block content %}
<div class="row">
    <div class="col-md-8 offset-md-2">
        <h2 class="mb-4">Nastavení Avatara</h2>
        <p class="text-info">
            Nabídka avatarů se **mění s každým obnovením stránky**, ale váš **vybraný avatar se uloží** a bude vždy zobrazen na stránce profilu!
        </p>

        <div class="card p-4 shadow-sm">
            <form method="POST" action="{{ url_for('profile_settings') }}">
    
                {% set selected_avatar = current_user.profile_image_url or 'male_1' %}

                <div class="row g-3">
                    {% for i in range(1, 6) %} {# Zobrazíme VŠECH 5 mužských avatarů #}
                        {% set avatar_id = 'male_' ~ i %}
                        {# KLÍČOVÁ OPRAVA: Použijte stabilní URL pro generování na základě ID #}
                        {% set avatar_url = 'https://avatar.iran.liara.run/public/boy?id=' ~ i %} 
                        <div class="col-4 col-sm-2 text-center">
                            <label class="d-block cursor-pointer">
                                <input type="radio" name="avatar_id" value="{{ avatar_id }}" 
                                    {% if avatar_id == selected_avatar %}checked{% endif %}
                                    class="d-none" required>
                                
                                <img src="{{ avatar_url }}" 
                                    alt="Avatar {{ avatar_id }}" 
                                    class="rounded-circle border border-2 p-1" 
                                    style="width: 80px; height: 80px; object-fit: cover;">
                            </label>
                        </div>
                    {% endfor %}
                </div>

                <div class="row g-3 mt-3">
                    {% for i in range(1, 6) %} {# Zobrazíme VŠECH 5 ženských avatarů #}
                        {% set avatar_id = 'female_' ~ i %}
                        {# KLÍČOVÁ OPRAVA: Použijte stabilní URL pro generování na základě ID #}
                        {% set avatar_url = 'https://avatar.iran.liara.run/public/girl?id=' ~ i %}
                        <div class="col-4 col-sm-2 text-center">
                            <label class="d-block cursor-pointer">
                                <input type="radio" name="avatar_id" value="{{ avatar_id }}" 
                                    {% if avatar_id == selected_avatar %}checked{% endif %}
                                    class="d-none" required>
                                
                                <img src="{{ avatar_url }}" 
                                    alt="Avatar {{ avatar_id }}" 
                                    class="rounded-circle border border-2 p-1" 
                                    style="width: 80px; height: 80px; object-fit: cover;">
                            </label>
                        </div>
                    {% endfor %}
                </div>

                <button type="submit" class="btn btn-primary mt-4">Uložit výběr avatara</button>
            </form>
        </div>
    </div>
</div>
{% endblock %}